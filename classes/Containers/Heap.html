<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
  <head>
    <title>Containers::Heap</title>
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type'>
    <link href='../../css/style.css' media='screen' rel='stylesheet' type='text/css'>
    <script type='text/javascript'>
      //<![CDATA[
        function popupCode(url) {
          window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
        }
        
        function toggleCode(id) {
          var code = document.getElementById(id)
        
          code.style.display = code.style.display != 'block' ? 'block' : 'none'
          return true
        }
        
        // Make codeblocks hidden by default
        document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
      //]]>
    </script>
  </head>
  <body class='page'>
    <div class='class' id='wrapper'>
      <div class='header'>
        <h1 class='name'>
          <span class='type'>class</span>
          Containers::Heap
        </h1>
        <ol class='paths'>
          <li>
            <a target="docwin" href="../../files/lib/containers/heap_rb.html">lib/containers/heap.rb</a>
          </li>
        </ol>
        <div class='parent'>
          Parent:
          <strong><a target="docwin" href="../Containers.html">Containers</a></strong>
        </div>
      </div>
      <div id='content'>
        <div id='text'>
          <div id='description'>
            
            <p>A <a href="Heap.html">Heap</a> is a container that satisfies the heap
            property that nodes are always smaller in value than their parent node.</p>
            
            <p>The <a href="Heap.html">Containers::Heap</a> class is flexible and upon
            initialization, takes an optional block that determines how the items are
            ordered. Two versions that are included are the <a
            href="MaxHeap.html">Containers::MaxHeap</a> and <a
            href="MinHeap.html">Containers::MinHeap</a> that return the largest and
            smallest items on each invocation, respectively.</p>
            
            <p>This library implements a Fibonacci heap, which allows O(1) complexity for
            most methods.</p>
          </div>
          <div id='method-list'>
            <h2>Methods</h2>
            <h3>Public Class</h3>
            <ol>
              <li><a target="docwin" href="#method-c-new">new</a></li>
            </ol>
            <h3>Public Instance</h3>
            <ol>
              <li><a target="docwin" href="#method-i-change_key">change_key</a></li>
              <li><a target="docwin" href="#method-i-clear">clear</a></li>
              <li><a target="docwin" href="#method-i-delete">delete</a></li>
              <li><a target="docwin" href="#method-i-empty-3F">empty?</a></li>
              <li><a target="docwin" href="#method-i-has_key-3F">has_key?</a></li>
              <li><a target="docwin" href="#method-i-merge-21">merge!</a></li>
              <li><a target="docwin" href="#method-i-next">next</a></li>
              <li><a target="docwin" href="#method-i-next_key">next_key</a></li>
              <li><a target="docwin" href="#method-i-pop">pop</a></li>
              <li><a target="docwin" href="#method-i-push">push</a></li>
              <li><a target="docwin" href="#method-i-size">size</a></li>
            </ol>
          </div>
          <div id='context'>
            <div id='includes'>
              <h2>Included modules</h2>
              <ol>
                <li>Enumerable</li>
              </ol>
            </div>
          </div>
          <div id='section'>
            <div id='aliases-list'>
              <h2>Public Instance Aliases</h2>
              <div class='name-list'>
                <table summary='Public Instance Aliases'>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'><<</td>
                    <td>-&gt;</td>
                    <td class='context-item-value'><a target="docwin" href="#method-i-push">push</a></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>length</td>
                    <td>-&gt;</td>
                    <td class='context-item-value'><a target="docwin" href="#method-i-size">size</a></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>next!</td>
                    <td>-&gt;</td>
                    <td class='context-item-value'><a target="docwin" href="#method-i-pop">pop</a></td>
                  </tr>
                </table>
              </div>
            </div>
            <div id='methods'>
              <h2>Public Class methods</h2>
              <div class='method public-class' id='method-method-c-new'>
                <a name='method-c-new'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>Heap.new(optional_array) { |x, y| optional_comparison_fn } -> new_heap</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>If an optional array is passed, the entries in the array are inserted into
                  the heap with equal key and value fields. Also, an optional block can be
                  passed to define the function that maintains heap property. For example, a
                  min-heap can be created with:</p>
                  
                  <pre class="ruby"><span class="ruby-identifier">minheap</span> = <span class="ruby-constant">Heap</span>.<span class="ruby-identifier">new</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span>, <span class="ruby-identifier">y</span><span class="ruby-operator">|</span> (<span class="ruby-identifier">x</span> <span class="ruby-operator">&lt;=&gt;</span> <span class="ruby-identifier">y</span>) <span class="ruby-operator">==</span> <span class="ruby-value">-1</span> }&#x000A;<span class="ruby-identifier">minheap</span>.<span class="ruby-identifier">push</span>(<span class="ruby-value">6</span>)&#x000A;<span class="ruby-identifier">minheap</span>.<span class="ruby-identifier">push</span>(<span class="ruby-value">10</span>)&#x000A;<span class="ruby-identifier">minheap</span>.<span class="ruby-identifier">pop</span> <span class="ruby-comment">#=&gt; 6</span></pre>
                  
                  <p>Thus, smaller elements will be parent nodes. The heap defaults to a
                  min-heap if no block is given.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-c-new-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-c-new-source'><span class="ruby-comment"># File lib/containers/heap.rb, line 38</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">ary</span>=[], &amp;<span class="ruby-identifier">block</span>)&#x000A;  <span class="ruby-ivar">@compare_fn</span> = <span class="ruby-identifier">block</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span>, <span class="ruby-identifier">y</span><span class="ruby-operator">|</span> (<span class="ruby-identifier">x</span> <span class="ruby-operator">&lt;=&gt;</span> <span class="ruby-identifier">y</span>) <span class="ruby-operator">==</span> <span class="ruby-value">-1</span> }&#x000A;  <span class="ruby-ivar">@next</span> = <span class="ruby-keyword">nil</span>&#x000A;  <span class="ruby-ivar">@size</span> = <span class="ruby-value">0</span>&#x000A;  <span class="ruby-ivar">@stored</span> = {}&#x000A;  &#x000A;  <span class="ruby-identifier">ary</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">n</span><span class="ruby-operator">|</span> <span class="ruby-identifier">push</span>(<span class="ruby-identifier">n</span>) } <span class="ruby-keyword">unless</span> <span class="ruby-identifier">ary</span>.<span class="ruby-identifier">empty?</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <h2>Public Instance methods</h2>
              <div class='method public-instance' id='method-method-i-change_key'>
                <a name='method-i-change_key'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>change_key(key, new_key) -> [new_key, value]</div>
                    <div>change_key(key, new_key) -> nil</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Changes the key from one to another. Doing so must not violate the heap
                  property or an exception will be raised. If the key is found, an array
                  containing the new key and  value pair is returned, otherwise nil is
                  returned.</p>
                  
                  <p>In the case of duplicate keys, an arbitrary key is changed. This will be
                  investigated more in the future.</p>
                  
                  <p>Complexity: amortized O(1)</p>
                  
                  <pre class="ruby"><span class="ruby-identifier">minheap</span> = <span class="ruby-constant">MinHeap</span>.<span class="ruby-identifier">new</span>([<span class="ruby-value">1</span>, <span class="ruby-value">2</span>])&#x000A;<span class="ruby-identifier">minheap</span>.<span class="ruby-identifier">change_key</span>(<span class="ruby-value">2</span>, <span class="ruby-value">3</span>) <span class="ruby-comment">#=&gt; raise error since we can't increase the value in a min-heap</span>&#x000A;<span class="ruby-identifier">minheap</span>.<span class="ruby-identifier">change_key</span>(<span class="ruby-value">2</span>, <span class="ruby-value">0</span>) <span class="ruby-comment">#=&gt; [0, 2]</span>&#x000A;<span class="ruby-identifier">minheap</span>.<span class="ruby-identifier">pop</span> <span class="ruby-comment">#=&gt; 2</span>&#x000A;<span class="ruby-identifier">minheap</span>.<span class="ruby-identifier">pop</span> <span class="ruby-comment">#=&gt; 1</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-change_key-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-change_key-source'><span class="ruby-comment"># File lib/containers/heap.rb, line 262</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">change_key</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">new_key</span>, <span class="ruby-identifier">delete</span>=<span class="ruby-keyword">false</span>)&#x000A;  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@stored</span>[<span class="ruby-identifier">key</span>].<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-ivar">@stored</span>[<span class="ruby-identifier">key</span>].<span class="ruby-identifier">empty?</span> <span class="ruby-operator">||</span> (<span class="ruby-identifier">key</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">new_key</span>)&#x000A;  &#x000A;  <span class="ruby-comment"># Must maintain heap property</span>&#x000A;  <span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;Changing this key would not maintain heap property!&quot;</span> <span class="ruby-keyword">unless</span> (<span class="ruby-identifier">delete</span> <span class="ruby-operator">||</span> <span class="ruby-ivar">@compare_fn</span>[<span class="ruby-identifier">new_key</span>, <span class="ruby-identifier">key</span>])&#x000A;  <span class="ruby-identifier">node</span> = <span class="ruby-ivar">@stored</span>[<span class="ruby-identifier">key</span>].<span class="ruby-identifier">shift</span>&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">node</span>&#x000A;    <span class="ruby-identifier">node</span>.<span class="ruby-identifier">key</span> = <span class="ruby-identifier">new_key</span>&#x000A;    <span class="ruby-ivar">@stored</span>[<span class="ruby-identifier">new_key</span>] <span class="ruby-operator">||=</span> []&#x000A;    <span class="ruby-ivar">@stored</span>[<span class="ruby-identifier">new_key</span>] <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">node</span>&#x000A;    <span class="ruby-identifier">parent</span> = <span class="ruby-identifier">node</span>.<span class="ruby-identifier">parent</span>&#x000A;    <span class="ruby-keyword">if</span> <span class="ruby-identifier">parent</span>&#x000A;      <span class="ruby-comment"># if heap property is violated</span>&#x000A;      <span class="ruby-keyword">if</span> <span class="ruby-identifier">delete</span> <span class="ruby-operator">||</span> <span class="ruby-ivar">@compare_fn</span>[<span class="ruby-identifier">new_key</span>, <span class="ruby-identifier">parent</span>.<span class="ruby-identifier">key</span>]&#x000A;        <span class="ruby-identifier">cut</span>(<span class="ruby-identifier">node</span>, <span class="ruby-identifier">parent</span>)&#x000A;        <span class="ruby-identifier">cascading_cut</span>(<span class="ruby-identifier">parent</span>)&#x000A;      <span class="ruby-keyword">end</span>&#x000A;    <span class="ruby-keyword">end</span>&#x000A;    <span class="ruby-keyword">if</span> <span class="ruby-identifier">delete</span> <span class="ruby-operator">||</span> <span class="ruby-ivar">@compare_fn</span>[<span class="ruby-identifier">node</span>.<span class="ruby-identifier">key</span>, <span class="ruby-ivar">@next</span>.<span class="ruby-identifier">key</span>]&#x000A;      <span class="ruby-ivar">@next</span> = <span class="ruby-identifier">node</span>&#x000A;    <span class="ruby-keyword">end</span>&#x000A;    <span class="ruby-keyword">return</span> [<span class="ruby-identifier">node</span>.<span class="ruby-identifier">key</span>, <span class="ruby-identifier">node</span>.<span class="ruby-identifier">value</span>]&#x000A;  <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-keyword">nil</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-clear'>
                <a name='method-i-clear'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>clear -> nil</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Removes all elements from the heap, destructively.</p>
                  
                  <p>Complexity: O(1)</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-clear-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-clear-source'><span class="ruby-comment"># File lib/containers/heap.rb, line 143</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">clear</span>&#x000A;  <span class="ruby-ivar">@next</span> = <span class="ruby-keyword">nil</span>&#x000A;  <span class="ruby-ivar">@size</span> = <span class="ruby-value">0</span>&#x000A;  <span class="ruby-ivar">@stored</span> = {}&#x000A;  <span class="ruby-keyword">nil</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-delete'>
                <a name='method-i-delete'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>delete(key) -> value</div>
                    <div>delete(key) -> nil</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Deletes the item with associated key and returns it. nil is returned if the
                  key  is not found. In the case of nodes with duplicate keys, an arbitrary
                  one is deleted.</p>
                  
                  <p>Complexity: amortized O(log n)</p>
                  
                  <pre class="ruby"><span class="ruby-identifier">minheap</span> = <span class="ruby-constant">MinHeap</span>.<span class="ruby-identifier">new</span>([<span class="ruby-value">1</span>, <span class="ruby-value">2</span>])&#x000A;<span class="ruby-identifier">minheap</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">1</span>) <span class="ruby-comment">#=&gt; 1</span>&#x000A;<span class="ruby-identifier">minheap</span>.<span class="ruby-identifier">size</span> <span class="ruby-comment">#=&gt; 1</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-delete-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-delete-source'><span class="ruby-comment"># File lib/containers/heap.rb, line 300</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">delete</span>(<span class="ruby-identifier">key</span>)&#x000A;  <span class="ruby-identifier">pop</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">change_key</span>(<span class="ruby-identifier">key</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-keyword">true</span>)&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-empty-3F'>
                <a name='method-i-empty-3F'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>empty? -> true or false</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Returns true if the heap is empty, false otherwise.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-empty-3F-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-empty-3F-source'><span class="ruby-comment"># File lib/containers/heap.rb, line 154</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">empty?</span>&#x000A;  <span class="ruby-ivar">@next</span>.<span class="ruby-identifier">nil?</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-has_key-3F'>
                <a name='method-i-has_key-3F'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>has_key?(key) -> true or false</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Returns true if heap contains the key.</p>
                  
                  <p>Complexity: O(1)</p>
                  
                  <pre class="ruby"><span class="ruby-identifier">minheap</span> = <span class="ruby-constant">MinHeap</span>.<span class="ruby-identifier">new</span>([<span class="ruby-value">1</span>, <span class="ruby-value">2</span>])&#x000A;<span class="ruby-identifier">minheap</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-value">2</span>) <span class="ruby-comment">#=&gt; true</span>&#x000A;<span class="ruby-identifier">minheap</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-value">4</span>) <span class="ruby-comment">#=&gt; false</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-has_key-3F-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-has_key-3F-source'><span class="ruby-comment"># File lib/containers/heap.rb, line 101</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">key</span>)&#x000A;  <span class="ruby-ivar">@stored</span>[<span class="ruby-identifier">key</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@stored</span>[<span class="ruby-identifier">key</span>].<span class="ruby-identifier">empty?</span> <span class="ruby-operator">?</span> <span class="ruby-keyword">true</span> <span class="ruby-operator">:</span> <span class="ruby-keyword">false</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-merge-21'>
                <a name='method-i-merge-21'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>merge!(otherheap) -> merged_heap</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Does a shallow merge of all the nodes in the other heap.</p>
                  
                  <p>Complexity: O(1)</p>
                  
                  <pre class="ruby"><span class="ruby-identifier">heap</span> = <span class="ruby-constant">MinHeap</span>.<span class="ruby-identifier">new</span>([<span class="ruby-value">5</span>, <span class="ruby-value">6</span>, <span class="ruby-value">7</span>, <span class="ruby-value">8</span>])&#x000A;<span class="ruby-identifier">otherheap</span> = <span class="ruby-constant">MinHeap</span>.<span class="ruby-identifier">new</span>([<span class="ruby-value">1</span>, <span class="ruby-value">2</span>, <span class="ruby-value">3</span>, <span class="ruby-value">4</span>])&#x000A;<span class="ruby-identifier">heap</span>.<span class="ruby-identifier">merge!</span>(<span class="ruby-identifier">otherheap</span>)&#x000A;<span class="ruby-identifier">heap</span>.<span class="ruby-identifier">size</span> <span class="ruby-comment">#=&gt; 8</span>&#x000A;<span class="ruby-identifier">heap</span>.<span class="ruby-identifier">pop</span> <span class="ruby-comment">#=&gt; 1</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-merge-21-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-merge-21-source'><span class="ruby-comment"># File lib/containers/heap.rb, line 170</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">merge!</span>(<span class="ruby-identifier">otherheap</span>)&#x000A;  <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;Trying to merge a heap with something not a heap&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">otherheap</span>.<span class="ruby-identifier">kind_of?</span> <span class="ruby-constant">Containers</span><span class="ruby-operator">::</span><span class="ruby-constant">Heap</span>&#x000A;  <span class="ruby-identifier">other_root</span> = <span class="ruby-identifier">otherheap</span>.<span class="ruby-identifier">instance_variable_get</span>(<span class="ruby-string">&quot;@next&quot;</span>)&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-identifier">other_root</span>&#x000A;    <span class="ruby-ivar">@stored</span> = <span class="ruby-ivar">@stored</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">otherheap</span>.<span class="ruby-identifier">instance_variable_get</span>(<span class="ruby-string">&quot;@stored&quot;</span>)) { <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">a</span>, <span class="ruby-identifier">b</span><span class="ruby-operator">|</span> (<span class="ruby-identifier">a</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">b</span>).<span class="ruby-identifier">flatten</span> }&#x000A;    <span class="ruby-comment"># Insert othernode's @next node to the left of current @next</span>&#x000A;    <span class="ruby-ivar">@next</span>.<span class="ruby-identifier">left</span>.<span class="ruby-identifier">right</span> = <span class="ruby-identifier">other_root</span>&#x000A;    <span class="ruby-identifier">ol</span> = <span class="ruby-identifier">other_root</span>.<span class="ruby-identifier">left</span>&#x000A;    <span class="ruby-identifier">other_root</span>.<span class="ruby-identifier">left</span> = <span class="ruby-ivar">@next</span>.<span class="ruby-identifier">left</span>&#x000A;    <span class="ruby-identifier">ol</span>.<span class="ruby-identifier">right</span> = <span class="ruby-ivar">@next</span>&#x000A;    <span class="ruby-ivar">@next</span>.<span class="ruby-identifier">left</span> = <span class="ruby-identifier">ol</span>&#x000A;    &#x000A;    <span class="ruby-ivar">@next</span> = <span class="ruby-identifier">other_root</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@compare_fn</span>[<span class="ruby-identifier">other_root</span>.<span class="ruby-identifier">key</span>, <span class="ruby-ivar">@next</span>.<span class="ruby-identifier">key</span>]&#x000A;  <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-ivar">@size</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">otherheap</span>.<span class="ruby-identifier">size</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-next'>
                <a name='method-i-next'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>next -> value</div>
                    <div>next -> nil</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Returns the value of the next item in heap order, but does not remove it.</p>
                  
                  <p>Complexity: O(1)</p>
                  
                  <pre class="ruby"><span class="ruby-identifier">minheap</span> = <span class="ruby-constant">MinHeap</span>.<span class="ruby-identifier">new</span>([<span class="ruby-value">1</span>, <span class="ruby-value">2</span>])&#x000A;<span class="ruby-identifier">minheap</span>.<span class="ruby-identifier">next</span> <span class="ruby-comment">#=&gt; 1</span>&#x000A;<span class="ruby-identifier">minheap</span>.<span class="ruby-identifier">size</span> <span class="ruby-comment">#=&gt; 2</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-next-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-next-source'><span class="ruby-comment"># File lib/containers/heap.rb, line 116</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-keyword">next</span>&#x000A;  <span class="ruby-ivar">@next</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@next</span>.<span class="ruby-identifier">value</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-next_key'>
                <a name='method-i-next_key'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>next_key -> key</div>
                    <div>next_key -> nil</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Returns the key associated with the next item in heap order, but does not
                  remove the value.</p>
                  
                  <p>Complexity: O(1)</p>
                  
                  <pre class="ruby"><span class="ruby-identifier">minheap</span> = <span class="ruby-constant">MinHeap</span>.<span class="ruby-identifier">new</span>&#x000A;<span class="ruby-identifier">minheap</span>.<span class="ruby-identifier">push</span>(<span class="ruby-value">1</span>, :<span class="ruby-identifier">a</span>)&#x000A;<span class="ruby-identifier">minheap</span>.<span class="ruby-identifier">next_key</span> <span class="ruby-comment">#=&gt; 1</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-next_key-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-next_key-source'><span class="ruby-comment"># File lib/containers/heap.rb, line 132</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">next_key</span>&#x000A;  <span class="ruby-ivar">@next</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@next</span>.<span class="ruby-identifier">key</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-pop'>
                <a name='method-i-pop'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>pop -> value</div>
                    <div>pop -> nil</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Returns the value of the next item in heap order and removes it from the
                  heap.</p>
                  
                  <p>Complexity: O(1)</p>
                  
                  <pre class="ruby"><span class="ruby-identifier">minheap</span> = <span class="ruby-constant">MinHeap</span>.<span class="ruby-identifier">new</span>([<span class="ruby-value">1</span>, <span class="ruby-value">2</span>])&#x000A;<span class="ruby-identifier">minheap</span>.<span class="ruby-identifier">pop</span> <span class="ruby-comment">#=&gt; 1</span>&#x000A;<span class="ruby-identifier">minheap</span>.<span class="ruby-identifier">size</span> <span class="ruby-comment">#=&gt; 1</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-pop-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-pop-source'><span class="ruby-comment"># File lib/containers/heap.rb, line 198</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">pop</span>&#x000A;  <span class="ruby-keyword">return</span> <span class="ruby-keyword">nil</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@next</span>&#x000A;  <span class="ruby-identifier">popped</span> = <span class="ruby-ivar">@next</span>&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@size</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span>&#x000A;    <span class="ruby-identifier">clear</span>&#x000A;    <span class="ruby-keyword">return</span> <span class="ruby-identifier">popped</span>.<span class="ruby-identifier">value</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-comment"># Merge the popped's children into root node</span>&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@next</span>.<span class="ruby-identifier">child</span>&#x000A;    <span class="ruby-ivar">@next</span>.<span class="ruby-identifier">child</span>.<span class="ruby-identifier">parent</span> = <span class="ruby-keyword">nil</span>&#x000A;    &#x000A;    <span class="ruby-comment"># get rid of parent</span>&#x000A;    <span class="ruby-identifier">sibling</span> = <span class="ruby-ivar">@next</span>.<span class="ruby-identifier">child</span>.<span class="ruby-identifier">right</span>&#x000A;    <span class="ruby-keyword">until</span> <span class="ruby-identifier">sibling</span> <span class="ruby-operator">==</span> <span class="ruby-ivar">@next</span>.<span class="ruby-identifier">child</span>&#x000A;      <span class="ruby-identifier">sibling</span>.<span class="ruby-identifier">parent</span> = <span class="ruby-keyword">nil</span>&#x000A;      <span class="ruby-identifier">sibling</span> = <span class="ruby-identifier">sibling</span>.<span class="ruby-identifier">right</span>&#x000A;    <span class="ruby-keyword">end</span>&#x000A;    &#x000A;    <span class="ruby-comment"># Merge the children into the root. If @next is the only root node, make its child the @next node</span>&#x000A;    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@next</span>.<span class="ruby-identifier">right</span> <span class="ruby-operator">==</span> <span class="ruby-ivar">@next</span>&#x000A;      <span class="ruby-ivar">@next</span> = <span class="ruby-ivar">@next</span>.<span class="ruby-identifier">child</span>&#x000A;    <span class="ruby-keyword">else</span>&#x000A;      <span class="ruby-identifier">next_left</span>, <span class="ruby-identifier">next_right</span> = <span class="ruby-ivar">@next</span>.<span class="ruby-identifier">left</span>, <span class="ruby-ivar">@next</span>.<span class="ruby-identifier">right</span>&#x000A;      <span class="ruby-identifier">current_child</span> = <span class="ruby-ivar">@next</span>.<span class="ruby-identifier">child</span>&#x000A;      <span class="ruby-ivar">@next</span>.<span class="ruby-identifier">right</span>.<span class="ruby-identifier">left</span> = <span class="ruby-identifier">current_child</span>&#x000A;      <span class="ruby-ivar">@next</span>.<span class="ruby-identifier">left</span>.<span class="ruby-identifier">right</span> = <span class="ruby-identifier">current_child</span>.<span class="ruby-identifier">right</span>&#x000A;      <span class="ruby-identifier">current_child</span>.<span class="ruby-identifier">right</span>.<span class="ruby-identifier">left</span> = <span class="ruby-identifier">next_left</span>&#x000A;      <span class="ruby-identifier">current_child</span>.<span class="ruby-identifier">right</span> = <span class="ruby-identifier">next_right</span>&#x000A;      <span class="ruby-ivar">@next</span> = <span class="ruby-ivar">@next</span>.<span class="ruby-identifier">right</span>&#x000A;    <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-ivar">@next</span>.<span class="ruby-identifier">left</span>.<span class="ruby-identifier">right</span> = <span class="ruby-ivar">@next</span>.<span class="ruby-identifier">right</span>&#x000A;    <span class="ruby-ivar">@next</span>.<span class="ruby-identifier">right</span>.<span class="ruby-identifier">left</span> = <span class="ruby-ivar">@next</span>.<span class="ruby-identifier">left</span>&#x000A;    <span class="ruby-ivar">@next</span> = <span class="ruby-ivar">@next</span>.<span class="ruby-identifier">right</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-identifier">consolidate</span>&#x000A;  &#x000A;  <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@stored</span>[<span class="ruby-identifier">popped</span>.<span class="ruby-identifier">key</span>].<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">popped</span>)&#x000A;    <span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;Couldn't delete node from stored nodes hash&quot;</span> &#x000A;  <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-ivar">@size</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>&#x000A;  &#x000A;  <span class="ruby-identifier">popped</span>.<span class="ruby-identifier">value</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-push'>
                <a name='method-i-push'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>push(key, value) -> value</div>
                    <div>push(value) -> value</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Inserts an item with a given key into the heap. If only one parameter is
                  given, the key is set to the value.</p>
                  
                  <p>Complexity: O(1)</p>
                  
                  <pre class="ruby"><span class="ruby-identifier">heap</span> = <span class="ruby-constant">MinHeap</span>.<span class="ruby-identifier">new</span>&#x000A;<span class="ruby-identifier">heap</span>.<span class="ruby-identifier">push</span>(<span class="ruby-value">1</span>, <span class="ruby-string">&quot;Cat&quot;</span>)&#x000A;<span class="ruby-identifier">heap</span>.<span class="ruby-identifier">push</span>(<span class="ruby-value">2</span>)&#x000A;<span class="ruby-identifier">heap</span>.<span class="ruby-identifier">pop</span> <span class="ruby-comment">#=&gt; &quot;Cat&quot;</span>&#x000A;<span class="ruby-identifier">heap</span>.<span class="ruby-identifier">pop</span> <span class="ruby-comment">#=&gt; 2</span></pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-push-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-push-source'><span class="ruby-comment"># File lib/containers/heap.rb, line 61</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">push</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>=<span class="ruby-identifier">key</span>)&#x000A;  <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;Heap keys must not be nil.&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">key</span>&#x000A;  <span class="ruby-identifier">node</span> = <span class="ruby-constant">Node</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>)&#x000A;  <span class="ruby-comment"># Add new node to the left of the @next node</span>&#x000A;  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@next</span>&#x000A;    <span class="ruby-identifier">node</span>.<span class="ruby-identifier">right</span> = <span class="ruby-ivar">@next</span>&#x000A;    <span class="ruby-identifier">node</span>.<span class="ruby-identifier">left</span> = <span class="ruby-ivar">@next</span>.<span class="ruby-identifier">left</span>&#x000A;    <span class="ruby-identifier">node</span>.<span class="ruby-identifier">left</span>.<span class="ruby-identifier">right</span> = <span class="ruby-identifier">node</span>&#x000A;    <span class="ruby-ivar">@next</span>.<span class="ruby-identifier">left</span> = <span class="ruby-identifier">node</span>&#x000A;    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@compare_fn</span>[<span class="ruby-identifier">key</span>, <span class="ruby-ivar">@next</span>.<span class="ruby-identifier">key</span>]&#x000A;      <span class="ruby-ivar">@next</span> = <span class="ruby-identifier">node</span>&#x000A;    <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-keyword">else</span>&#x000A;    <span class="ruby-ivar">@next</span> = <span class="ruby-identifier">node</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-ivar">@size</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>&#x000A;  &#x000A;  <span class="ruby-identifier">arr</span> = []&#x000A;  <span class="ruby-identifier">w</span> = <span class="ruby-ivar">@next</span>.<span class="ruby-identifier">right</span>&#x000A;  <span class="ruby-keyword">until</span> <span class="ruby-identifier">w</span> <span class="ruby-operator">==</span> <span class="ruby-ivar">@next</span> <span class="ruby-keyword">do</span>&#x000A;    <span class="ruby-identifier">arr</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">w</span>.<span class="ruby-identifier">value</span>&#x000A;    <span class="ruby-identifier">w</span> = <span class="ruby-identifier">w</span>.<span class="ruby-identifier">right</span>&#x000A;  <span class="ruby-keyword">end</span>&#x000A;  <span class="ruby-identifier">arr</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-ivar">@next</span>.<span class="ruby-identifier">value</span>&#x000A;  <span class="ruby-ivar">@stored</span>[<span class="ruby-identifier">key</span>] <span class="ruby-operator">||=</span> []&#x000A;  <span class="ruby-ivar">@stored</span>[<span class="ruby-identifier">key</span>] <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">node</span>&#x000A;  <span class="ruby-identifier">value</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-method-i-size'>
                <a name='method-i-size'></a>
                <div class='synopsis'>
                  <span class='name'>
                    <div>size -> int</div>
                  </span>
                </div>
                <div class='description'>
                  
                  <p>Return the number of elements in the heap.</p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('method-i-size-source'); return false">
                    [show source]
                  </a>
                  <pre id='method-i-size-source'><span class="ruby-comment"># File lib/containers/heap.rb, line 19</span>&#x000A;<span class="ruby-keyword">def</span> <span class="ruby-identifier">size</span>&#x000A;  <span class="ruby-ivar">@size</span>&#x000A;<span class="ruby-keyword">end</span></pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id='footer-push'></div>
    </div>
    <div id='footer'>
      <a target="docwin" href="http://github.com/mislav/hanna/tree/master"><strong>Hanna</strong> RDoc template</a>
    </div>
  </body>
</html>
